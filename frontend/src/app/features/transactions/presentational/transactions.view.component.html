<section class="app-page__header">
  <div>
    <div class="app-page__title">Transactions Ledger</div>
    <div class="app-page__subtitle">Todos los movimientos en cuentas conectadas.</div>
  </div>
  <div class="d-flex flex-wrap align-items-center gap-2">
    <button class="app-btn-ghost"><i class="bi bi-funnel me-2"></i>Filtros</button>
    <button class="app-btn-ghost"><i class="bi bi-arrow-down-up me-2"></i>Ordenar</button>
    <button class="app-btn-ghost"><i class="bi bi-download me-2"></i>Exportar</button>
    <button class="app-btn-primary"><i class="bi bi-plus-lg me-2"></i>Nuevo gasto</button>
  </div>
</section>

<div class="d-flex flex-wrap align-items-center gap-2 mb-3">
  <span class="text-muted text-uppercase" style="font-size: 0.7rem; letter-spacing: 0.14em;">Filtros activos</span>
  <span class="app-pill">Fecha: {{ vm().filters.dateRange }}</span>
  <span class="app-pill">Cuenta: {{ vm().filters.account }}</span>
  <button class="app-btn-ghost">+ Agregar filtro</button>
</div>

<div class="app-card">
  <div class="table-responsive">
    <table class="app-table">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Descripción</th>
          <th>Categoría</th>
          <th>Método</th>
          <th class="text-end">Monto</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tx of vm().transactions" [class.is-highlight]="tx.id === vm().highlightedId">
          <td>{{ tx.dateLabel }}</td>
          <td>
            <div class="d-flex align-items-center gap-2">
              <span class="app-icon-pill" [class.bg-success]="tx.type === 'income'">
                <i class="bi" [ngClass]="tx.icon"></i>
              </span>
              <div>
                <div class="fw-semibold">{{ tx.merchant }}</div>
                <div class="text-muted-2" style="font-size: 0.7rem;" *ngIf="tx.note">{{ tx.note }}</div>
              </div>
            </div>
          </td>
          <td><span class="app-pill">{{ tx.category }}</span></td>
          <td class="text-muted-2">{{ tx.method }}</td>
          <td class="text-end fw-semibold">
            {{ formatAmount(tx) | currency: vm().currency:'symbol':'1.0-2' }}
          </td>
          <td class="text-end">
            <button class="app-btn-ghost"><i class="bi bi-three-dots"></i></button>
          </td>
        </tr>
        <tr class="is-edit">
          <td><input class="app-input" value="20 Feb 2026" /></td>
          <td>
            <input class="app-input" value="Unknown Merchant 1002" />
          </td>
          <td>
            <button class="app-btn-ghost w-100 d-flex align-items-center justify-content-between">
              Seleccionar <i class="bi bi-chevron-down"></i>
            </button>
          </td>
          <td class="text-muted-2">Visa ·• 8822</td>
          <td class="text-end"><input class="app-input text-end" value="$210.00" /></td>
          <td class="text-end">
            <button class="app-btn-primary"><i class="bi bi-check-lg"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="d-flex align-items-center justify-content-between mt-3 text-muted-2" style="font-size: 0.75rem;">
    <span>Mostrando {{ vm().rangeLabel }} de {{ vm().totalCount }} resultados</span>
    <div class="d-flex gap-2">
      <button class="app-btn-ghost"><i class="bi bi-chevron-left"></i></button>
      <button class="app-btn-ghost"><i class="bi bi-chevron-right"></i></button>
    </div>
  </div>
</div>
